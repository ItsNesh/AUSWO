<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AUSWO · Preferences</title>
  <link rel="stylesheet" href="/stylesheets/Global.css">
  <link rel="stylesheet" href="/stylesheets/Footer.css">
  <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
</head>
<body>
  <div id="app" class="page-shell">
    <nav class="navbar">
      <a class="brand" href="/index.html">
        AUSWO
        <span class="brand-tag">Migration Hub</span>
      </a>
      <div class="nav-links" v-if="sessionInfo !== null">
        <a href="/index.html">Home</a>
        <a href="/Dashboard.html">Dashboard</a>
        <a href="/Immigration.html">Immigration</a>
        <a href="/Profile.html">Profile</a>
        <a href="/preferences.html">Preferences</a>
        <a href="/contact.html">Contact</a>
        <a href="/points-calculator.html">Points Calculator</a>
        <a href="/account.html">Account</a>
        <a href="/AdminPage.html">Admin</a>
        <a href="/Login.html" v-if="!isLoggedIn">Log In</a>
        <a href="/auth/logout" v-if="isLoggedIn" @click.prevent="logout">Log Out</a>
      </div>
    </nav>

    <main class="page-content">
      <section class="page-container section">
        <div class="section-header">
          <div>
            <span class="tag"> Preferences </span>
            <h1 class="section-title">Personalise your migration plan</h1>
            <p class="section-subtitle">
              Update your preferred visa subclasses, destinations, and professional goals so AUSWO can send tailored alerts.
            </p>
          </div>
          <div class="section-actions">
            <a class="btn btn-primary" href="/points-calculator.html">Recalculate points</a>
          </div>
        </div>

        <div class="grid-two">
          <form class="card" id="preferences-form">
            <h2 class="card-title">Core preferences</h2>
            <div class="form-grid">
              <div>
                <label for="pref-visa">Target visa</label>
                <select id="pref-visa" required>
                  <option value="">Pick a visa path</option>
                  <option>Subclass 189 · Skilled Independent</option>
                  <option>Subclass 190 · Skilled Nominated</option>
                  <option>Subclass 491 · Skilled Work Regional</option>
                  <option>Subclass 485 · Temporary Graduate</option>
                </select>
              </div>
              <div>
                <label for="pref-state">Preferred state</label>
                <select id="pref-state" required>
                  <option value="">Select a state</option>
                  <option>Australian Capital Territory</option>
                  <option>New South Wales</option>
                  <option>Northern Territory</option>
                  <option>Queensland</option>
                  <option>South Australia</option>
                  <option>Tasmania</option>
                  <option>Victoria</option>
                  <option>Western Australia</option>
                </select>
              </div>
            </div>
            <div class="form-grid">
              <div>
                <label for="pref-occupation">Priority occupation</label>
                <input id="pref-occupation" type="text" placeholder="Software Engineer" required>
              </div>
              <div>
                <label for="pref-invitation">Invitation target score</label>
                <input id="pref-invitation" type="number" min="0" placeholder="85" required>
              </div>
            </div>
            <div>
              <label for="pref-notes">Notes for our advisors</label>
              <textarea id="pref-notes" rows="4" placeholder="List any special circumstances or timelines."></textarea>
            </div>
            <div class="form-footer">
              <button type="submit" class="btn btn-primary">Save preferences</button>
              <button type="reset" class="btn btn-outline">Reset</button>
            </div>
            <p class="helper-text">Preferences sync with your profile so you can view them on the dashboard.</p>
          </form>

          <aside class="surface-soft">
            <h2 class="card-title">Notifications</h2>
            <p class="muted">
              Select the alerts you would like to receive. We only send essential updates aligned with your targets.
            </p>
            <form id="notifications-form" class="list-plain">
              <label class="remember">
                <input type="checkbox" id="notif-state" checked>
                <span>State nomination invitation rounds</span>
              </label>
              <label class="remember">
                <input type="checkbox" id="notif-occupation">
                <span>Occupation list changes</span>
              </label>
              <label class="remember">
                <input type="checkbox" id="notif-webinar" checked>
                <span>Webinars and Q&A events</span>
              </label>
              <label class="remember">
                <input type="checkbox" id="notif-points">
                <span>Points threshold movements</span>
              </label>
              <button type="submit" class="btn btn-outline">Update subscriptions</button>
            </form>
            <div class="divider"></div>
            <div class="surface-soft">
              <strong>Need guidance?</strong>
              <p class="muted">Chat with our advisors for a personal roadmap based on your preferences.</p>
              <a class="btn btn-outline" href="/contact.html">Book a session</a>
            </div>
          </aside>
        </div>

        <section class="surface preferences-summary">
          <h2 class="card-title">Current snapshot</h2>
          <div class="content-grid three">
            <div class="stat-card">
              <span class="pill">Visa focus</span>
              <span class="stat-value" id="summary-visa">—</span>
              <span class="stat-label">Target visa pathway</span>
            </div>
            <div class="stat-card">
              <span class="pill">State</span>
              <span class="stat-value" id="summary-state">—</span>
              <span class="stat-label">Preferred nomination</span>
            </div>
            <div class="stat-card">
              <span class="pill">Goal</span>
              <span class="stat-value" id="summary-score">—</span>
              <span class="stat-label">Invitation score target</span>
            </div>
          </div>
        </section>
      </section>
    </main>
  </div>

  <script>
    const visaEl = document.getElementById('summary-visa');
    const stateEl = document.getElementById('summary-state');
    const scoreEl = document.getElementById('summary-score');

    document.getElementById('preferences-form').addEventListener('submit', (event) => {
      event.preventDefault();
      const visa = document.getElementById('pref-visa').value;
      const state = document.getElementById('pref-state').value;
      const score = document.getElementById('pref-invitation').value;
      visaEl.textContent = visa || '—';
      stateEl.textContent = state || '—';
      scoreEl.textContent = score ? `${score}+` : '—';
      alert('Preferences saved locally. Connect with an advisor to sync to your account.');
    });

    document.getElementById('notifications-form').addEventListener('submit', (event) => {
      event.preventDefault();
      alert('Notification preferences updated.');
    });
  </script>
  <script src="/javascripts/Footer.js"></script>
  <script src="/javascripts/SessionManager.js"></script>
</body>
</html>
